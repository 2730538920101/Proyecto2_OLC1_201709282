{"ast":null,"code":"import { filter, take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../Servicios/servicio.service\";\nimport * as i2 from \"@materia-ui/ngx-monaco-editor\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/grid-list\";\nimport * as i6 from \"@angular/material/tabs\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@angular/forms\";\n\nfunction EditorComponent_mat_tab_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-tab\", 20);\n    i0.ɵɵelementStart(1, \"div\", 21);\n    i0.ɵɵelementStart(2, \"ngx-monaco-editor\", 22);\n    i0.ɵɵlistener(\"init\", function EditorComponent_mat_tab_30_Template_ngx_monaco_editor_init_2_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.editorInit($event);\n    })(\"ngModelChange\", function EditorComponent_mat_tab_30_Template_ngx_monaco_editor_ngModelChange_2_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const tab_r3 = restoredCtx.$implicit;\n      return tab_r3.code = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tab_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"label\", tab_r3.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"options\", ctx_r2.editorOptions)(\"ngModel\", tab_r3.code);\n  }\n}\n\nexport let EditorComponent = /*#__PURE__*/(() => {\n  class EditorComponent {\n    constructor(servicio, monacoLoaderService, _router) {\n      this.servicio = servicio;\n      this.monacoLoaderService = monacoLoaderService;\n      this._router = _router;\n      this.tabs = [];\n      this.contador = 0;\n      this.tablaError = new Array();\n      this.tablaSimbolos = new Array();\n      this.ASTstring = \"\";\n      this.ventana = {\n        nombre: \"\",\n        code: \"\"\n      };\n      this.editorOptions = {\n        theme: 'vs-dark',\n        language: 'js',\n        roundedSelection: true,\n        autoIndent: \"full\"\n      };\n      this.consoleOptions = {\n        theme: 'vs-dark',\n        language: '',\n        roundedSelection: true,\n        autoIndent: \"full\",\n        readOnly: true\n      };\n      this.console = \"\";\n      this.monacoLoaderService.isMonacoLoaded$.pipe(filter(isLoaded => isLoaded), take(1)).subscribe(() => {\n        monaco.editor.defineTheme('myCustomTheme', {\n          base: 'vs-dark',\n          inherit: true,\n          rules: [{\n            token: 'comment',\n            foreground: 'ffa500',\n            fontStyle: 'italic underline'\n          }, {\n            token: 'comment.js',\n            foreground: '008800',\n            fontStyle: 'bold'\n          }, {\n            token: 'comment.css',\n            foreground: '0000ff'\n          } // will inherit fontStyle from `comment` above\n          ],\n          colors: {}\n        });\n      });\n    }\n\n    ngOnInit() {}\n\n    AgregarVentana() {\n      this.contador++;\n      this.ventana.nombre = \"VENTANA\" + this.contador;\n      this.console = this.console + 'SE HA CREADO UNA NUEVA VENTANA\\n';\n      this.tabs.push(this.ventana);\n      this.ventana = {\n        nombre: \"\",\n        code: \"\"\n      };\n    }\n\n    CerrarVentana(index) {\n      this.tabs.splice(index, 1);\n      this.console = this.console + 'SE HA CERRADO UNA VENTANA \\n';\n    }\n\n    editorInit(editor) {\n      editor.setSelection({\n        startLineNumber: 1,\n        startColumn: 1,\n        endColumn: 50,\n        endLineNumber: 3\n      });\n    }\n\n    CapturarArchivo(evento, index) {\n      try {\n        let a = evento.target.files[0];\n        let text = \"\";\n\n        if (a) {\n          let reader = new FileReader();\n\n          reader.onload = ev => {\n            var _a;\n\n            const resultado = (_a = ev.target) === null || _a === void 0 ? void 0 : _a.result;\n            text = String(resultado);\n            this.tabs[index].code = text.toString();\n            this.console = this.console + \"SE HA AÑADIDO EL CONTENIDO A \" + this.tabs[index].nombre + \": DEL ARCHIVO: \" + a.name + \"\\n\";\n          };\n\n          reader.readAsText(a);\n        }\n      } catch (error) {\n        this.console = this.console + \"NO HA AÑADIDO NINGUNA VENTANA\\n\";\n      }\n    }\n\n    AbrirArchivo(archivo) {\n      if (this.tabs.length == 0) {\n        this.console = \"NO HA AÑADIDO NINGUNA VENTANA\\n\";\n      } else {\n        archivo.click();\n      }\n    }\n\n    GuardarArchivo(index) {\n      try {\n        let nombre = this.tabs[index].nombre + \".sc\";\n        let content = this.tabs[index].code;\n        let type = \"text/plain\";\n\n        if (this.tabs[index].code != \"\") {\n          this.DescargarArchivo(content, nombre, type);\n          this.console = this.console + \"SE HA GUARDADO EL ARCHIVO: \" + nombre + \"\\n\";\n        } else {\n          this.console = this.console + \"EL ARCHIVO QUE DESEA GUARDAR ESTA VACIO\\n\";\n        }\n      } catch (error) {\n        this.console = this.console + \"NO HA AÑADIDO NINGUNA VENTANA\\n\";\n      }\n    }\n\n    DescargarArchivo(content, fileName, contenType) {\n      var a = document.createElement(\"a\");\n      var archivo = new Blob([content], {\n        type: contenType\n      });\n      a.href = URL.createObjectURL(archivo);\n      a.download = fileName;\n      a.click();\n    }\n\n    Compilar(index) {\n      this.servicio.post('http://localhost:3000/backend/analizar', this.tabs[index]).subscribe(result => {\n        for (let i = 0; i < result.prints.length; i++) {\n          this.console = this.console + result.prints[i] + '\\n';\n        }\n\n        for (let j = 0; j < result.errores.length; j++) {\n          this.console = this.console + result.errores[j].message + '\\n';\n        }\n\n        this.tablaError = result.errores;\n        this.ASTstring = result.ast;\n        this.tablaSimbolos = result.tablasimbolos;\n        console.log(result.resultado);\n      });\n    }\n\n    GenerarErrores() {\n      this.servicio.setErrores(this.tablaError);\n\n      this._router.navigate(['errors']);\n    }\n\n    GenerarTabla() {\n      this.servicio.setSimbolos(this.tablaSimbolos);\n\n      this._router.navigate(['symbols']);\n    }\n\n    GenerarAST() {\n      this.servicio.setAstString(this.ASTstring);\n\n      this._router.navigate(['ast']);\n    }\n\n  }\n\n  EditorComponent.ɵfac = function EditorComponent_Factory(t) {\n    return new (t || EditorComponent)(i0.ɵɵdirectiveInject(i1.ServicioService), i0.ɵɵdirectiveInject(i2.MonacoEditorLoaderService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  EditorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EditorComponent,\n    selectors: [[\"app-editor\"]],\n    decls: 47,\n    vars: 5,\n    consts: [[1, \"header\"], [1, \"titulo\"], [1, \"navegacion\"], [\"accept\", \".sc\", \"type\", \"file\", 2, \"display\", \"none\", 3, \"change\"], [\"archivo\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"boton\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 1, \"boton\", 3, \"click\"], [1, \"body-app\"], [\"cols\", \"5\", \"rowHeight\", \"100%\"], [3, \"colspan\"], [1, \"contenedor\"], [1, \"titulo2\"], [1, \"cuerpo\"], [\"backgroundColor\", \"accent\"], [\"Tabulador\", \"\"], [3, \"label\", 4, \"ngFor\", \"ngForOf\"], [3, \"options\", \"ngModel\", \"ngModelChange\"], [1, \"footer-app\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"boton-foot\", 3, \"click\"], [\"mat-raised-button\", \"\", \"color\", \"accent\", 1, \"boton-foot\", 3, \"click\"], [3, \"label\"], [1, \"editor\"], [1, \"myeditor\", 3, \"options\", \"ngModel\", \"init\", \"ngModelChange\"]],\n    template: function EditorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r8 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h1\", 1);\n        i0.ɵɵtext(2, \"PROYECTO 2 ORGANIZACI\\u00D3N DE LENGUAJES Y COMPILADORES 1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"h2\", 1);\n        i0.ɵɵelementStart(4, \"b\");\n        i0.ɵɵtext(5, \"CARLOS JAVIER MART\\u00CDNEZ POLANCO 201709282\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"nav\", 2);\n        i0.ɵɵelementStart(7, \"input\", 3, 4);\n        i0.ɵɵlistener(\"change\", function EditorComponent_Template_input_change_7_listener($event) {\n          i0.ɵɵrestoreView(_r8);\n\n          const _r1 = i0.ɵɵreference(29);\n\n          return ctx.CapturarArchivo($event, _r1.selectedIndex);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function EditorComponent_Template_button_click_9_listener() {\n          i0.ɵɵrestoreView(_r8);\n\n          const _r0 = i0.ɵɵreference(8);\n\n          return ctx.AbrirArchivo(_r0);\n        });\n        i0.ɵɵtext(10, \"Abrir\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function EditorComponent_Template_button_click_11_listener() {\n          i0.ɵɵrestoreView(_r8);\n\n          const _r1 = i0.ɵɵreference(29);\n\n          return ctx.GuardarArchivo(_r1.selectedIndex);\n        });\n        i0.ɵɵtext(12, \"Guardar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function EditorComponent_Template_button_click_13_listener() {\n          return ctx.AgregarVentana();\n        });\n        i0.ɵɵtext(14, \"Nueva Ventana\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function EditorComponent_Template_button_click_15_listener() {\n          i0.ɵɵrestoreView(_r8);\n\n          const _r1 = i0.ɵɵreference(29);\n\n          return ctx.CerrarVentana(_r1.selectedIndex);\n        });\n        i0.ɵɵtext(16, \"Cerrar Ventana\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function EditorComponent_Template_button_click_17_listener() {\n          i0.ɵɵrestoreView(_r8);\n\n          const _r1 = i0.ɵɵreference(29);\n\n          return ctx.Compilar(_r1.selectedIndex);\n        });\n        i0.ɵɵtext(18, \"Compilar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 7);\n        i0.ɵɵelementStart(20, \"mat-grid-list\", 8);\n        i0.ɵɵelementStart(21, \"mat-grid-tile\", 9);\n        i0.ɵɵelementStart(22, \"div\", 10);\n        i0.ɵɵelementStart(23, \"div\");\n        i0.ɵɵelementStart(24, \"h1\", 11);\n        i0.ɵɵelementStart(25, \"b\");\n        i0.ɵɵtext(26, \"EDITOR\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 12);\n        i0.ɵɵelementStart(28, \"mat-tab-group\", 13, 14);\n        i0.ɵɵtemplate(30, EditorComponent_mat_tab_30_Template, 3, 3, \"mat-tab\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"mat-grid-tile\", 9);\n        i0.ɵɵelementStart(32, \"div\", 10);\n        i0.ɵɵelementStart(33, \"div\");\n        i0.ɵɵelementStart(34, \"h1\", 11);\n        i0.ɵɵelementStart(35, \"b\");\n        i0.ɵɵtext(36, \"CONSOLA\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 12);\n        i0.ɵɵelementStart(38, \"ngx-monaco-editor\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function EditorComponent_Template_ngx_monaco_editor_ngModelChange_38_listener($event) {\n          return ctx.console = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\", 17);\n        i0.ɵɵelementStart(40, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function EditorComponent_Template_button_click_40_listener() {\n          return ctx.GenerarAST();\n        });\n        i0.ɵɵtext(41, \"Reporte AST\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function EditorComponent_Template_button_click_42_listener() {\n          return ctx.GenerarTabla();\n        });\n        i0.ɵɵtext(43, \"Ver Tabla De Simbolos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function EditorComponent_Template_button_click_44_listener() {\n          return ctx.GenerarErrores();\n        });\n        i0.ɵɵtext(45, \"Ver Tabla De Errores\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(46, \"router-outlet\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(21);\n        i0.ɵɵproperty(\"colspan\", 3);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tabs);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"colspan\", 2);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"options\", ctx.consoleOptions)(\"ngModel\", ctx.console);\n      }\n    },\n    directives: [i4.MatButton, i5.MatGridList, i5.MatGridTile, i6.MatTabGroup, i7.NgForOf, i2.MonacoEditorComponent, i8.NgControlStatus, i8.NgModel, i3.RouterOutlet, i6.MatTab],\n    styles: [\".header[_ngcontent-%COMP%]{max-width:100%;height:150px;background-color:#789;text-align:center}.titulo[_ngcontent-%COMP%]{color:#9400d3}.titulo2[_ngcontent-%COMP%]{color:#000;margin-top:25px;margin-left:25px}.navegacion[_ngcontent-%COMP%]{max-width:100%;height:55px;background-color:#5f9ea0}.boton[_ngcontent-%COMP%]{margin:2px}.boton[_ngcontent-%COMP%], .boton-foot[_ngcontent-%COMP%]{width:200px;height:50px}.boton-foot[_ngcontent-%COMP%]{margin:25px 10px 10px;padding-top:5px}.body-app[_ngcontent-%COMP%]{height:650px;background-color:#789}.footer-app[_ngcontent-%COMP%]{height:101px;width:100%;background-color:#5f9ea0;text-align:center}.contenedor[_ngcontent-%COMP%]{width:100%;height:100%;align-content:flex-start}.cuerpo[_ngcontent-%COMP%]{border:2px #000;margin-left:5px;height:85%;width:95%}.editor[_ngcontent-%COMP%]{height:505px;width:100%}.a1[_ngcontent-%COMP%], .myeditor[_ngcontent-%COMP%]{height:100%;width:100%}.a1[_ngcontent-%COMP%]{color:#fff}.a1[_ngcontent-%COMP%], .a2[_ngcontent-%COMP%]{text-decoration:none;display:block}.a2[_ngcontent-%COMP%]{color:#000;width:100%;height:100%}\"]\n  });\n  return EditorComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}